import{w as G,l as J,k as Q,c as y,x as F,t as k,q as E,e as b,E as K,m as O,p as V,n as L,D as X,G as Z,y as tt,Q as D,J as et,i as nt}from"./BuLWTQJ-.js";import{r as N,o as ot,P as R,O as at,z as i,d as C,c as w,N as lt,a1 as st,H as z}from"./C8-PzCqa.js";import{o as rt,c as ct,g as it,p as ut,d as dt,q as ft,t as mt,P as gt,v as ht,w as vt,f as Bt,m as wt,n as bt}from"./DIaV-xco.js";const pt=(t,s)=>{const n=N(),a=()=>{n.value=Q(t).height};return ot(()=>{R(a);for(let r=1;r<=3;r++)setTimeout(a,100*r)}),rt(()=>R(a)),at([G,J],a),n};function yt(t,s){const n=pt(t);return a=>i("div",{class:s("placeholder"),style:{height:n.value?`${n.value}px`:void 0}},[a()])}const[U,H]=y("action-bar"),W=Symbol(U),Ct={placeholder:Boolean,safeAreaInsetBottom:k};var Pt=C({name:U,props:Ct,setup(t,{slots:s}){const n=N(),a=yt(n,H),{linkChildren:r}=F(W);r();const d=()=>{var f;return i("div",{ref:n,class:[H(),{"van-safe-area-bottom":t.safeAreaInsetBottom}]},[(f=s.default)==null?void 0:f.call(s)])};return()=>t.placeholder?a(d):d()}});const St=E(Pt),A=E(ct),[xt,kt]=y("action-bar-button"),Tt=b({},it,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var $t=C({name:xt,props:Tt,setup(t,{slots:s}){const n=ut(),{parent:a,index:r}=K(W),d=w(()=>{if(a){const e=a.children[r.value-1];return!(e&&"isButton"in e)}}),f=w(()=>{if(a){const e=a.children[r.value+1];return!(e&&"isButton"in e)}});return dt({isButton:!0}),()=>{const{type:e,icon:o,text:c,color:u,loading:h,disabled:p}=t;return i(A,{class:kt([e,{last:f.value,first:d.value}]),size:"large",type:e,icon:o,color:u,loading:h,disabled:p,onClick:n},{default:()=>[s.default?s.default():c]})}}});const I=E($t),[j,At]=y("row"),M=Symbol(j),_t={tag:O("div"),wrap:k,align:String,gutter:{type:[String,Number,Array],default:0},justify:String};var Mt=C({name:j,props:_t,setup(t,{slots:s}){const{children:n,linkChildren:a}=F(M),r=w(()=>{const e=[[]];let o=0;return n.forEach((c,u)=>{o+=Number(c.span),o>24?(e.push([u]),o-=24):e[e.length-1].push(u)}),e}),d=w(()=>{let e=0;Array.isArray(t.gutter)?e=Number(t.gutter[0])||0:e=Number(t.gutter);const o=[];return e&&r.value.forEach(c=>{const u=e*(c.length-1)/c.length;c.forEach((h,p)=>{if(p===0)o.push({right:u});else{const P=e-o[h-1].right,T=u-P;o.push({left:P,right:T})}})}),o}),f=w(()=>{const{gutter:e}=t,o=[];if(Array.isArray(e)&&e.length>1){const c=Number(e[1])||0;if(c<=0)return o;r.value.forEach((u,h)=>{h!==r.value.length-1&&u.forEach(()=>{o.push({bottom:c})})})}return o});return a({spaces:d,verticalSpaces:f}),()=>{const{tag:e,wrap:o,align:c,justify:u}=t;return i(e,{class:At({[`align-${c}`]:c,[`justify-${u}`]:u,nowrap:!o})},{default:()=>{var h;return[(h=s.default)==null?void 0:h.call(s)]}})}}});const[Et,Ot]=y("col"),Nt={tag:O("div"),span:V(0),offset:L};var qt=C({name:Et,props:Nt,setup(t,{slots:s}){const{parent:n,index:a}=K(M),r=w(()=>{if(!n)return;const{spaces:d,verticalSpaces:f}=n;let e={};if(d&&d.value&&d.value[a.value]){const{left:c,right:u}=d.value[a.value];e={paddingLeft:c?`${c}px`:null,paddingRight:u?`${u}px`:null}}const{bottom:o}=f.value[a.value]||{};return b(e,{marginBottom:o?`${o}px`:null})});return()=>{const{tag:d,span:f,offset:e}=t;return i(d,{style:r.value,class:Ot({[f]:f,[`offset-${e}`]:e})},{default:()=>{var o;return[(o=s.default)==null?void 0:o.call(s)]}})}}});const[Dt,g,x]=y("dialog"),Rt=b({},ft,{title:String,theme:String,width:L,message:[String,Function],callback:Function,allowHtml:Boolean,className:X,transition:O("van-dialog-bounce"),messageAlign:String,closeOnPopstate:k,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:k,closeOnClickOverlay:Boolean}),Ht=[...mt,"transition","closeOnPopstate"];var It=C({name:Dt,props:Rt,emits:["confirm","cancel","keydown","update:show"],setup(t,{emit:s,slots:n}){const a=N(),r=lt({confirm:!1,cancel:!1}),d=l=>s("update:show",l),f=l=>{var m;d(!1),(m=t.callback)==null||m.call(t,l)},e=l=>()=>{t.show&&(s(l),t.beforeClose?(r[l]=!0,Bt(t.beforeClose,{args:[l],done(){f(l),r[l]=!1},canceled(){r[l]=!1}})):f(l))},o=e("cancel"),c=e("confirm"),u=st(l=>{var m,v;if(l.target!==((v=(m=a.value)==null?void 0:m.popupRef)==null?void 0:v.value))return;({Enter:t.showConfirmButton?c:D,Escape:t.showCancelButton?o:D})[l.key](),s("keydown",l)},["enter","esc"]),h=()=>{const l=n.title?n.title():t.title;if(l)return i("div",{class:g("header",{isolated:!t.message&&!n.default})},[l])},p=l=>{const{message:m,allowHtml:v,messageAlign:B}=t,S=g("message",{"has-title":l,[B]:B}),$=et(m)?m():m;return v&&typeof $=="string"?i("div",{class:S,innerHTML:$},null):i("div",{class:S},[$])},P=()=>{if(n.default)return i("div",{class:g("content")},[n.default()]);const{title:l,message:m,allowHtml:v}=t;if(m){const B=!!(l||n.title);return i("div",{key:v?1:0,class:g("content",{isolated:!B})},[p(B)])}},T=()=>i("div",{class:[vt,g("footer")]},[t.showCancelButton&&i(A,{size:"large",text:t.cancelButtonText||x("cancel"),class:g("cancel"),style:{color:t.cancelButtonColor},loading:r.cancel,disabled:t.cancelButtonDisabled,onClick:o},null),t.showConfirmButton&&i(A,{size:"large",text:t.confirmButtonText||x("confirm"),class:[g("confirm"),{[ht]:t.showCancelButton}],style:{color:t.confirmButtonColor},loading:r.confirm,disabled:t.confirmButtonDisabled,onClick:c},null)]),q=()=>i(St,{class:g("footer")},{default:()=>[t.showCancelButton&&i(I,{type:"warning",text:t.cancelButtonText||x("cancel"),class:g("cancel"),color:t.cancelButtonColor,loading:r.cancel,disabled:t.cancelButtonDisabled,onClick:o},null),t.showConfirmButton&&i(I,{type:"danger",text:t.confirmButtonText||x("confirm"),class:g("confirm"),color:t.confirmButtonColor,loading:r.confirm,disabled:t.confirmButtonDisabled,onClick:c},null)]}),Y=()=>n.footer?n.footer():t.theme==="round-button"?q():T();return()=>{const{width:l,title:m,theme:v,message:B,className:S}=t;return i(gt,z({ref:a,role:"dialog",class:[g([v]),S],style:{width:tt(l)},tabindex:0,"aria-labelledby":m||B,onKeydown:u,"onUpdate:show":d},Z(t,Ht)),{default:()=>[h(),P(),Y()]})}}});let _;const Ft={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let Kt=b({},Ft);function Lt(){({instance:_}=wt({setup(){const{state:s,toggle:n}=bt();return()=>i(It,z(s,{"onUpdate:show":n}),null)}}))}function zt(t){return nt?new Promise((s,n)=>{_||Lt(),_.open(b({},Kt,t,{callback:a=>{(a==="confirm"?s:n)(a)}}))}):Promise.resolve(void 0)}const Yt=t=>zt(b({showCancelButton:!0},t));export{Mt as a,Yt as b,qt as c,It as s};
